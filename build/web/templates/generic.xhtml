<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:c="http://java.sun.com/jsp/jstl/core" lang="es">
    <h:head>
        <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
        <h:outputStylesheet name="css/bootstrap.min.css"/>
        <h:outputStylesheet name="css/theme.css"/>
        <h:outputStylesheet name="css/styles.css"/>
        <h:outputStylesheet name="css/font-awesome.min.css"/>
        <p:link rel="icon" href="images/logo.png" type="image/png"/>
        <h:outputScript library="js" name="bootstrap.min.js" />

        <h:outputScript library="js" name="calendar_es.js" />
        <title>Administrador de APU</title>
    </h:head>

    <h:body>
        <c:if test="#{loginCtrl.usuario eq null}">
            #{facesContext.externalContext.redirect("/APUGobAtl")}
        </c:if>
        <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
            <a class="navbar-brand" href="javascript:void(0)">
                <h:graphicImage value="#{resource['images/logo.png']}"></h:graphicImage>
            </a>
            <p class="title-header mr-auto">Administrador de APU</p><br/>
            <button class="navbar-toggler navbar-toggler-right" type="button" data-toggle="collapse" data-target="#navb">
                <span class="navbar-toggler-icon"></span>
            </button>
            <!--p:outputPanel rendered="{loginCtrl.usuario != null}"-->
            <div class="navbar-custom-menu">
                <ul class="nav navbar-nav">
                    <li class="dropdown user user-menu">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown" aria-expanded="false">
                            <i id="profile" outcome="/views/home.xhtml" class="topbar-icon fa fa-fw fa-user-circle form-inline my-2 my-lg-0"></i>
                            <span class="hidden-xs user">#{loginCtrl.usuarioSession.nombres} #{loginCtrl.usuarioSession.apellidos}</span>
                        </a>
                        <ul class="dropdown-menu">
                            <li role="menuitem" class="menuitem">
                                <h:form> 
                                    <p:commandLink action="#{loginCtrl.perfilUsuario()}" ajax="false">
                                        <i class="fa fa-fw fa-user text-primary"></i> Perfil del usuario
                                    </p:commandLink>
                                </h:form>
                            </li>
                            <li role="menuitem" class="menuitem">
                                <h:form> 
                                    <p:commandLink action="#{loginCtrl.manualUsuario()}" ajax="false">
                                        <i class="fa fa-fw fa-question text-success"></i> Ayuda de la app
                                    </p:commandLink>
                                </h:form>
                            </li>
                            <li role="menuitem" class="menuitem">
                                <h:form>
                                    <p:commandLink ajax="true" onclick="PF('dlg1').show()">
                                        <i class="fa fa-fw fa-info text-info"></i> Información de la app
                                    </p:commandLink>
                                </h:form>
                            </li>
                            <li role="menuitem" class="menuitem">
                                <h:form> 
                                    <p:commandLink action="#{loginCtrl.logout()}" ajax="false">
                                        <i class="fa fa-fw fa-close text-danger"></i> Cerrar Sesión
                                    </p:commandLink>
                                </h:form>
                            </li>
                        </ul>
                    </li>
                </ul>
            </div>
            <!--/p:outputPanel-->            
            <p:dialog header="APU" widgetVar="dlg1" minHeight="40" width="350" showEffect="fade">
                <p><b>App: </b>APU - Secretaría de infraestructura</p>
                <p><b>Versión: </b>1.0</p>
                <p>Departamento del Atlántico - Colombia</p>
                <p><b>Definición: </b>Aplicación de Analisís de Precios Unitarios</p>
                <p>Copyrigth © 2021</p>
            </p:dialog>
        </nav>

        <p:growl id="grow" showDetail="true" sticky="false" life="5000" />

        <div id="content" class="center_content">
            <ui:insert name="content" >Content</ui:insert>
        </div>
    </h:body>
</html>
